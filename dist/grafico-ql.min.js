!function(e,t){"function"==typeof define&&define.amd?define("grafico-ql",["exports"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports):t(e.GraficoQL={})}("undefined"!=typeof self?self:this,function(n){var r={headers:{},method:"POST"};function o(e,t){!function(){var e="Cannot initialize GraphQLClient, cause of missing ",t=" You can resolve this by providing a polyfill for it.";if(!fetch)throw new ReferenceError(e+"fetch-function!"+t);if(!Promise)throw new ReferenceError(e+"Promise-constructor!"+t)}();this[" url"]=e;this[" options"]=s(JSON.parse(JSON.stringify(r)),t||{})}o.prototype.setHeader=function(e,t){this[" options"].headers[e]=t;return this};function s(t,r){Object.keys(r).forEach(function(e){"object"!=typeof t[e]||null===t[e]?t[e]=r[e]:Array.isArray(t[e])?Array.isArray(r[e])&&(t[e]=t[e].concat(r[e])):"object"!=typeof r[e]||null===r[e]||Array.isArray(r[e])||(t[e]=s(t[e],r[e]))});return t}o.prototype.request=function(t,r){var n,e=[this[" url"]],o={resolve:null,reject:null},i={};switch(this[" options"].method.toLowerCase()){case"post":this.setHeader("Content-Type","application/json");i.body=JSON.stringify({query:t,variables:r||void 0});break;case"get":this.setHeader("Content-Type","text/plain");e.push((-1===this[" url"].indexOf("?")?"?":"&")+"query="+encodeURIComponent(t));r&&e.push("&variables="+encodeURIComponent(JSON.stringify(r)));break;default:throw new Error("Invalid method ("+this[" options"].method+"). Use method GET or POST!")}o.promise=new Promise(function(e,t){o.resolve=e;o.reject=t});n=function(e,t,r,n){var o;if(r.ok&&!n.errors&&n.data){this.resolve(n.data);return}(o="string"==typeof n?{error:n}:n||{}).status=r.status;this.reject({response:o,request:{query:e,variables:t}})}.bind(o,t,r);fetch(e.join(""),s(this[" options"],i)).then(function(e){var t=n.bind(null,e);(function(e){var t=e.headers.get("Content-Type");return t&&0===t.indexOf("application/json")?e.json():e.text()})(e).then(t,t)},function(e){o.reject({response:{status:900,error:e},request:{query:t,variables:r}})});return o.promise};s(n,{create:function(e,t){return new o(e,t)},request:function(e,t,r){return n.create(e).request(t,r)}})});"function"==typeof define&&define.amd&&define(["grafico-ql"],function(e){return e});