!function(e,t){"function"==typeof define&&define.amd?define("grafico-ql",t):"object"==typeof module&&module.exports?module.exports=t():e.GraficoQL=t()}(this,function(){var r={headers:{},method:"POST"};function n(e,t){this[" url"]=e;this[" options"]=Object.assign(JSON.parse(JSON.stringify(r)),t||{})}n.prototype.setHeader=function(e,t){this[" options"].headers[e]=t;return this};function o(e,t,r){var n,o=[this[" url"]],s={resolve:null,reject:null};switch(this[" options"].method.toLowerCase()){case"post":this.setHeader("Content-Type","application/json");this[" options"].body=JSON.stringify({query:t,variables:r||void 0});break;case"get":this.setHeader("Content-Type","text/plain");delete this[" options"].body;o.push((-1===this[" url"].indexOf("?")?"?":"&")+"query="+encodeURIComponent(t));r&&o.push("&variables="+encodeURIComponent(JSON.stringify(r)));break;default:throw new Error("Invalid method ("+this[" options"].method+"). Use method GET or POST!")}s.promise=new Promise(function(e,t){s.resolve=e;s.reject=t});n=function(e,t,r,n,o){var s={};if(n.ok&&(o.data||o.errors))if(e){o.headers=n.headers;o.status=n.status;this.resolve(o)}else{o.errors&&(s.errors=o.errors);void 0!==o.data&&(s.data=o.data);"[object Object]"===Object.prototype.toString.call(o.extensions)&&(s.extensions=o.extensions);this.resolve(s)}else{(s="string"==typeof o?{error:o}:o||{}).status=n.status;e&&(s.headers=n.headers);this.reject({response:s,request:{query:t,variables:r}})}}.bind(s,e,t,r);fetch(o.join(""),this[" options"]).then(function(e){var t,r=n.bind(null,e);((t=(e=e).headers.get("Content-Type"))&&0===t.indexOf("application/json")?e.json():e.text().then(function(e){return JSON.parse(e)})).then(r,r)},function(e){s.reject({response:{status:900,error:e},request:{query:t,variables:r}})});return s.promise}n.prototype.request=function(e,t){return o.call(this,!1,e,t)};n.prototype.rawRequest=function(e,t){return o.call(this,!0,e,t)};return{create:function(e,t){return new n(e,t)},request:function(e,t,r){return new n(e).request(t,r)},rawRequest:function(e,t,r){return new n(e).rawRequest(t,r)}}});"function"==typeof define&&define.amd&&define(["grafico-ql"],function(e){return e});