!function(e,t){"function"==typeof define&&define.amd?define("grafico-ql",["exports"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports):t(e.GraficoQL={})}("undefined"!=typeof self?self:this,function(n){var r={headers:{"Content-Type":"application/json"}};function o(e,t){!function(){var e="Cannot initialize GraphQLClient, cause of missing ",t=" You can resolve this by providing a polyfill for it.";if(!fetch)throw new ReferenceError(e+"fetch-function!"+t);if(!Promise)throw new ReferenceError(e+"Promise-constructor!"+t)}();this[" url"]=e;this[" options"]=i(JSON.parse(JSON.stringify(r)),t||{})}o.prototype.setHeaders=function(e){"object"==typeof e&&!Array.isArray(e)&&(this.options.headers=e||{});return this};o.prototype.setHeader=function(e,t){this[" options"].headers[e]=t;return this};function i(t,r){Object.keys(r).forEach(function(e){"object"!=typeof t[e]||null===t[e]?t[e]=r[e]:Array.isArray(t[e])?Array.isArray(r[e])&&(t[e]=t[e].concat(r[e])):"object"===r[e]&&null!==r[e]||(t[e]=i(t[e],r[e]))});return t}o.prototype.request=function(t,r){var o,n={resolve:null,reject:null},e={method:"POST",body:JSON.stringify({query:t,variables:r||void 0})};n.promise=new Promise(function(e,t){n.resolve=e;n.reject=t});o=function(e,t,r,n){var o;if(r.ok&&!n.errors&&n.data){this.resolve(n.data);return}(o="string"==typeof n?{error:n}:n||{}).status=r.status;this.reject({response:o,request:{query:e,variables:t}})}.bind(n,t,r);fetch(this[" url"],i(this[" options"],e)).then(function(e){var t,r,n=o.bind(null,e);(t=e,r=t.headers.get("Content-Type"),r&&0===r.indexOf("application/json")?t.json():t.text()).then(n,n)},function(e){n.reject({response:{status:900,error:e},request:{query:t,variables:r}})});return n.promise};i(n,{create:function(e,t){return new o(e,t)},request:function(e,t,r){return n.create(e).request(t,r)}})});"function"==typeof define&&define.amd&&define(["grafico-ql"],function(e){return e});